<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="../../_rhdefault.css"/></head><body id="v3485903" class="topic reference" lang="en_US"><div class="breadcrumbs"><div><div><a href="">ThunderBird StormCluster System</a></div><div><a href="contents/topics/r-cluster-mgmt-commands">Cluster management basic commands</a></div></div></div><h1 class="title">Cluster management basic commands</h1><div class="shortdesc"><div><div><span>Lists the basic commands used for managing clusters. The basic commands are: </span><strong class="keyword cmdname">showcluster</strong><span>, </span><strong class="keyword cmdname">badmin showstatus</strong><span>, </span><strong class="keyword cmdname">badmin restart -p</strong><span>, </span><strong class="keyword cmdname">hostload</strong><span>, </span><strong class="keyword cmdname">hostacct</strong><span>, </span><strong class="keyword cmdname">listhosts</strong><span>, </span><strong class="keyword cmdname">hostlimits</strong><span>, and </span><strong class="keyword cmdname">statclusters</strong><span>.</span></div></div></div><h2 class="title">showcluster command</h2><div class="p">Displays execution cluster resource provider and consumer information, resource flow information, and connection status between the submission cluster and execution cluster.</div><div class="p"><code class="ph codeph display-inline">% <span class="ph userinput display-inline">showcluster report</span></code></div><div class="p">Use <strong class="keyword cmdname">-app</strong> to view available application profiles in remote clusters.</div><div class="p">Information related to <em class="term display-inline">StormCluster</em> is displayed under the heading <span class="keyword display-inline">Job Forwarding Information</span>. </div><div class="p"><dl class="dl parml"><div class="dlentry plentry"><dt class="dt pt">local_queue</dt><dd class="dd pd"><div class="p">Name of a <em class="term display-inline">StormCluster</em> queue.</div></dd></div><div class="dlentry plentry"><dt class="dt pt">job_flow</dt><dd class="dd pd"><div class="p">Indicates direction of job flow.</div><ul id="ul_nqx_tir_yd" class="ul"><li class="li"><div class="p">send: The local queue is a submission cluster send-jobs queue (SNDJOBS_TO is defined in the local queue). </div></li><li class="li"><div class="p">recv: The local queue is an execution cluster receive-jobs queue (RCVJOBS_FROM is defined in the local queue).</div></li></ul></dd></div><div class="dlentry plentry"><dt class="dt pt">remote</dt><dd class="dd pd"><div class="p">Shows the name of the remote queue, always the same as the local queue name.</div><div class="p">For receive-jobs queues, always “-”. </div></dd></div><div class="dlentry plentry"><dt class="dt pt">cluster</dt><dd class="dd pd"><div class="p">For send-jobs queues, shows the name of the execution cluster containing the receive-jobs queue.</div><div class="p">For receive-jobs queues, shows the name of the submission cluster that can send jobs to the local queue.</div></dd></div><div class="dlentry plentry"><dt class="dt pt">status</dt><dd class="dd pd"><div class="p">Indicates the connection status between the local queue and remote queue.</div><div class="p"><ul id="ul_mks_ahr_yd" class="ul"><li class="li"><div class="p">ok: The submission cluster and execution cluster can exchange information and the system is properly configured.</div></li><li class="li"><div class="p">disc: Communication between the two clusters has not been established. This could occur because there are no jobs waiting to be dispatched, or because the remote master cannot be located. </div></li><li class="li"><div class="p">reject: The remote queue rejects jobs from the send-jobs queue. The local queue and remote queue are connected and the clusters communicate, but the queue-level configuration is not correct. </div></li></ul></div></dd></div></dl></div><h2 class="title">badmin showstatus command</h2><div class="p">Displays current cluster information. The last two lines only appear during a parallel <strong class="keyword cmdname">daemon</strong> restart initiated with the <strong class="keyword cmdname">badmin restart -p</strong> command.</div><div class="p"><code class="ph codeph display-inline">% <span class="ph userinput display-inline">badmin showstatus</span></code></div><div class="section"><h2 class="title">badmin restart -p command</h2><div class="p">Command to start daemon in parallel.</div><div class="p"><code class="ph codeph display-inline">% <span class="ph userinput display-inline">badmin restart -p</span></code></div><div class="p">Starts <strong class="keyword cmdname">batchd</strong> in parallel, leaving the existing <strong class="keyword cmdname">batchd</strong> free to respond to queries and run commands while the new <strong class="keyword cmdname">batchd</strong> restarts, reading configuration files and replaying events. Once all events have been read <strong class="keyword cmdname">batchd</strong> daemons merge, replaying new events and leaving only the new <strong class="keyword cmdname">batchd</strong> running.</div><div class="p">During a parallel <strong class="keyword cmdname">batchd</strong> restart, new <strong class="keyword cmdname">badmin restart</strong> and <strong class="keyword cmdname">badmin reconfig</strong> commands are not accepted. Parallel <strong class="keyword cmdname">batchd</strong> restart using <strong class="keyword cmdname">badmin mbdrestart -p</strong> does not work with duplicate event logging (<span class="keyword parmname display-inline">LSB_LOCALDIR</span> in <span class="ph filepath display-inline">host.conf</span>).</div><div class="p">The existing command <strong class="keyword cmdname">badmin restart</strong> remains unchanged.</div></div><div class="section"><h2 class="title">hostload command</h2><div class="p">This command runs locally (in the execution cluster) when submitted by a running job.</div><div class="p"><code class="ph codeph display-inline">% <span class="ph userinput display-inline">hostload</span></code></div><div class="p"><dl class="dl parml"><div class="dlentry plentry"><dt class="dt pt">-cname</dt><dd class="dd pd"><div class="p">The option <strong class="keyword cmdname">-cname</strong> includes the cluster name for execution cluster hosts and host groups in output for <strong class="keyword cmdname">hostload</strong>.</div><div class="p">%<span class="ph userinput display-inline"> hostload -cname</span> </div></dd></div></dl></div></div><div class="section"><h2 class="title">hostacct command</h2><div class="p">Displays accounting statistics for finished jobs within all clusters connected by <em class="term display-inline">StormCluster</em>.</div><div class="p"><code class="ph codeph display-inline">% <span class="ph userinput display-inline">hostacct</span></code></div><div class="p">This command runs locally (in the execution cluster) when submitted by a running job.</div><div class="p">Accounting statistics include:<ul id="ul_xxh_whr_yd" class="ul"><li class="li"><div class="p">Date and time of submission.</div></li><li class="li"><div class="p">Date and time of execution.</div></li><li class="li"><div class="p">Time the job took to run.</div></li><li class="li"><div class="p">Host the job ran on.</div></li><li class="li"><div class="p">Any suspensions or resumptions of the job.</div></li><li class="li"><div class="p">The submission user account name.</div></li></ul></div></div><div class="section"><h2 class="title">listhost command</h2><div class="p">This command runs locally (in the execution cluster) when submitted by a running job.</div><div class="p">% <span class="ph userinput display-inline">listhosts</span></div><div class="p"><dl class="dl parml"><div class="dlentry plentry"><dt class="dt pt">-cname</dt><dd class="dd pd"><div class="p">The option <strong class="keyword cmdname">-cname</strong> includes the cluster name for execution cluster hosts and host groups in output for <strong class="keyword cmdname">listhosts</strong>.</div></dd></div></dl></div></div><div id="section_xgm_jyt_qr" class="section"><h2 class="title">hostlimits command</h2><div class="p">Displays cluster limit data across all clusters, including forward limits and aggregated execution cluster limits.</div><div class="p"> All clusters are shown by default.</div><div id="p_cnz_nyt_qr" class="p">To specify a remote limit with the <strong class="keyword cmdname">-n</strong> option, include the cluster name as well as the limit name: <span class="ph userinput display-inline">hostlimits -n <em class="keyword varname">limit_name</em>@<em class="keyword varname">cluster_name</em></span>.</div><div id="p_jbn_4yt_qr" class="p"><dl class="dl parml"><div class="dlentry plentry"><dt class="dt pt">-fwd</dt><dd class="dd pd"><div class="p">Displays forward slot allocation limits.</div><div class="p">Use <strong class="keyword cmdname">-fwd</strong> with <strong class="keyword cmdname">-c</strong> to display forward slot limit configuration.</div></dd></div><div class="dlentry plentry"><dt class="dt pt">-fwd -C <em class="keyword varname">cluster_name</em>...</dt><dd class="dd pd"><div class="p">Displays forward slot allocation limits for one or more specific clusters. <strong class="keyword cmdname">-C</strong> cannot be used without <strong class="keyword cmdname">-fwd</strong>.</div><div class="p">Use <strong class="keyword cmdname">-fwd -C</strong> with <strong class="keyword cmdname">-c</strong> to display forward slot limit configuration for the specified cluster.</div></dd></div></dl></div></div><div class="section"><h2 class="title">hostpart command</h2><div class="p">Displays information about host partitions. By default, hostpart displays information about all host partitions. Host partitions are used to configure host-partition fairshare scheduling.</div><div class="p">ClusterView provides commands for running tasks on remote hosts and ports (LIM_PORT and RES_PORT) for communication. Therefore, even if your cluster restricts users from directly logging into or running commands on remote hosts (therefore restricting your users to using commands to access remote hosts), users can still run some commands to run tasks on remote systems under certain circumstances.</div><div class="p">The <span class="ph userinput display-inline">hostpart -x</span> command where <span class="ph userinput display-inline">x</span> defines the host range can be directed to any cluster host. It will be propagated in order to return partition reports from the designated host range. </div></div><div class="section"><h2 class="title">statclusters command</h2><div class="p">This command runs locally (in the execution cluster) when submitted by a running job.</div><div class="p"><code class="ph codeph display-inline">% <span class="ph userinput display-inline">statclusters</span></code></div><div class="p">Sample command response:</div><div class="p"><span class="ph systemoutput display-inline">CLUSTER_NAME STATUS MASTER_HOST ADMIN HOSTS SERVERS</span></div><div class="p"><span class="ph systemoutput display-inline">sub_cluster ok hostA admin 1 1</span></div><div class="p"><span class="ph systemoutput display-inline">cluster2 ok hostB admin 1 1</span></div><div class="p"><span class="ph systemoutput display-inline">cluster3 ok hostC admin 2 2</span></div></div></body></html>